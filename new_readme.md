# YouBike 2.0 即時站點資訊查詢工具

這是一個使用 Python 編寫的命令列工具，旨在提供 YouBike 2.0 站點的即時資訊查詢，包括一般自行車與電輔車的數量、可停空位等。

## 功能

*   **多功能搜尋**：可透過站點編號、中文站名或地址的關鍵字進行精準或模糊搜尋。
*   **全站點列表**：支援查詢所有營運中的 YouBike 2.0 站點資訊（為避免資訊過多，預設最多顯示前 100 站）。
*   **即時車輛資訊**：清楚顯示每個站點的 YouBike 2.0 一般車輛 (`yb2`) 和 YouBike 2.0E 電輔車 (`eyb`) 的即時可借數量。
*   **電輔車篩選**：使用者可自行選擇是否只顯示有電輔車的站點。

## 程式檔案結構

*   **`YouBike.py`**: 主程式檔案，整合了站點搜尋與即時資訊查詢的功能。直接執行此檔案即可使用本工具。
*   **`station-min-yb2.py`**: 一個輔助腳本，用於單獨獲取並印出所有站點的基礎資料。
*   **`parkingInfo.py`**: 一個輔助腳本，用於示範如何查詢特定站點的即時車輛與空位資訊。

## 安裝與執行

### 1. 環境需求

請確保您的電腦已安裝 Python。本工具需要使用 `requests` 函式庫來發送網路請求。

### 2. 安裝函式庫

若您的環境中尚未安裝 `requests`，請在終端機或命令提示字元中執行以下指令：
```bash
pip install requests
```

### 3. 執行程式

在終端機中，切換到專案所在的目錄，然後執行主程式：
```bash
python YouBike.py
```
程式將會引導您輸入查詢關鍵字，並詢問是否需要篩選電輔車站點。

## API 請求標頭 (Headers) 說明

在與 YouBike API 進行通訊時，程式會附上 HTTP `headers`。這麼做的主要目的是模擬一個真實的瀏覽器使用者，以確保請求能被伺服器正常處理並回傳資料，避免因被識別為自動化爬蟲而遭到阻擋。

| 標頭 (Header) | 作用說明 |
| :--- | :--- |
| `accept` | 告知伺服器客戶端能接收的回應內容類型 (`*/*` 代表接受任何類型)。 |
| `accept-language` | 告知伺服器客戶端偏好的語言，例如 `zh-TW` (繁體中文)。 |
| `content-type` | 告知伺服器客戶端發送的資料主體格式，例如 `application/json`。 |
| `user-agent` | 提供客戶端的資訊 (如瀏覽器、作業系統)，讓請求看起來像是來自一個標準的瀏覽器。 |
| `sec-ch-ua` 系列 | User-Agent Client Hints，提供更詳細的客戶端版本與平台資訊。 |
| `sec-fetch-*` 系列 | Fetch Metadata Request Headers，描述請求的上下文，例如請求模式 (`cors`)、目的地 (`empty`) 等。 |

## 資料欄位詳解

本工具的資料來源主要分為兩部分：**站點基本資料**和**站點即時狀態**。

### 1. 站點基本資料

此資料描述了站點的靜態屬性，例如名稱、位置等。

**API 來源**: `https://apis.youbike.com.tw/json/station-min-yb2.json`

| 欄位 (Field) | 說明 | 範例 |
| :--- | :--- | :--- |
| `station_no` | **站點唯一編號** (Primary Key) | `"500101001"` |
| `name_tw` | **站點中文名稱** | `"捷運科技大樓站"` |
| `district_tw`| 站點所在的**中文行政區** | `"大安區"` |
| `address_tw` | 站點的**中文地址** | `"復興南路二段235號前"` |
| `name_en` | 站點英文名稱 | `"MRT Technology Bldg. Sta."` |
| `district_en`| 站點所在的英文行政區 | `"Daan Dist."` |
| `address_en` | 站點的英文地址 | `"No.235, Sec. 2, Fuxing S. Rd."` |
| `lat` | **緯度**座標 | `"25.02605"` |
| `lng` | **經度**座標 | `"121.5436"` |
| `status` | 站點狀態 (`1`: 正常營運) | `1` |
| `type` | 站點類型 (`2`: YouBike 2.0) | `2` |
| `updated_at` | 資料在後端系統的更新時間 | `"2025-10-08 09:13:27"` |

### 2. 站點即時狀態

此資料描述了站點的動態資訊，包含車輛與空位數量，需要透過傳送 `station_no` 來查詢。

**API 來源**: `https://apis.youbike.com.tw/tw2/parkingInfo`

| 欄位 (Field) | 說明 | 範例 |
| :--- | :--- | :--- |
| `station_no` | **站點唯一編號**，用於對應基本資料 | `"501210134"` |
| `parking_spaces` | **總停車柱數量** | `16` |
| `available_spaces` | **目前可借的車輛總數** | `10` |
| `available_spaces_detail` | 一個物件，詳細記錄不同車種的數量 | `{ "yb2": 10, "eyb": 0 }` |
| ↳ `yb2` | **可借的 YouBike 2.0 一般自行車數量** | `10` |
| ↳ `eyb` | **可借的 YouBike 2.0E 電輔車數量** | `0` |
| `empty_spaces` | **可停放的空位數量** | `6` |
| `forbidden_spaces` | 暫停使用的車位數量 (通常為 `0`) | `0` |
| `status` | 即時營運狀態 (`1`: 正常) | `1` |
